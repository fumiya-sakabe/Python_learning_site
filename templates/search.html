{% extends "base.html" %}

{% block title %}æ¤œç´¢ - Pythonå­¦ç¿’ã‚µã‚¤ãƒˆ{% endblock %}

{% block content %}
<div class="page-header">
    <div class="container">
        <h1>æ¤œç´¢</h1>
        <p>ãƒ¬ãƒƒã‚¹ãƒ³ã‚„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¤œç´¢ã§ãã¾ã™</p>
    </div>
</div>

<section class="search-section">
    <div class="container">
        <div class="search-box">
            <form method="GET" action="{{ url_for('search_page') }}" class="search-form">
                <input type="text" name="q" value="{{ query }}" placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›..." class="search-input" autofocus>
                <button type="submit" class="btn btn-primary">æ¤œç´¢</button>
            </form>
        </div>

        <div class="search-filters">
            <a href="{{ url_for('search_page', q=query) }}" class="filter-tag {% if not category %}active{% endif %}">
                ã™ã¹ã¦
            </a>
            <a href="{{ url_for('search_page', q=query, category='lessons') }}" class="filter-tag {% if category == 'lessons' %}active{% endif %}">
                ãƒ¬ãƒƒã‚¹ãƒ³ã®ã¿
            </a>
            <a href="{{ url_for('search_page', q=query, category='projects') }}" class="filter-tag {% if category == 'projects' %}active{% endif %}">
                ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã¿
            </a>
        </div>

        {% if query %}
        <div class="search-results">
            <h2>æ¤œç´¢çµæœ: ã€Œ{{ query }}ã€</h2>
            
            {% if results.lessons or results.projects %}
            <div class="results-summary">
                <p>
                    ãƒ¬ãƒƒã‚¹ãƒ³: <strong>{{ results.lessons|length }}</strong>ä»¶ã€
                    ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: <strong>{{ results.projects|length }}</strong>ä»¶
                </p>
            </div>

            {% if results.lessons %}
            <div class="results-group">
                <h3>ğŸ“š ãƒ¬ãƒƒã‚¹ãƒ³</h3>
                <div class="lessons-grid">
                    {% for lesson in results.lessons %}
                    <div class="lesson-card">
                        <div class="lesson-header">
                            <div class="lesson-badge level-{{ lesson.get('level', 'åˆç´š') }}">{{ lesson.get('level', 'åˆç´š') }}</div>
                            <span class="lesson-number">{{ lesson.id }}</span>
                        </div>
                        <h4>{{ lesson.title }}</h4>
                        <p class="lesson-category">{{ lesson.get('category', 'N/A') }}</p>
                        <a href="{{ url_for('lesson_detail', lesson_id=lesson.id) }}" class="btn btn-primary btn-sm">è©³ç´°ã‚’è¦‹ã‚‹</a>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            {% if results.projects %}
            <div class="results-group">
                <h3>ğŸ’» ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</h3>
                <div class="projects-grid">
                    {% for project in results.projects %}
                    <div class="project-card">
                        <h4>{{ project.title }}</h4>
                        <p class="project-description">{{ project.get('description', 'èª¬æ˜ãŒã‚ã‚Šã¾ã›ã‚“') }}</p>
                        <a href="{{ url_for('project_detail', project_id=project.id) }}" class="btn btn-primary btn-sm">ã“ã®ãƒ¬ãƒƒã‚¹ãƒ³ã‚’è¦‹ã‚‹</a>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            {% else %}
            <div class="empty-state">
                <p>æ¤œç´¢çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>
                <p>åˆ¥ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢ã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p>
            </div>
            {% endif %}
        </div>
        {% else %}
        <div class="search-placeholder">
            <p>æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ã€ãƒ¬ãƒƒã‚¹ãƒ³ã‚„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¢ã—ã¦ãã ã•ã„ã€‚</p>
            <div class="search-suggestions">
                <h3>äººæ°—ã®æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰</h3>
                <div class="suggestion-tags">
                    <a href="{{ url_for('search_page', q='Python') }}" class="suggestion-tag">Python</a>
                    <a href="{{ url_for('search_page', q='Flask') }}" class="suggestion-tag">Flask</a>
                    <a href="{{ url_for('search_page', q='é–¢æ•°') }}" class="suggestion-tag">é–¢æ•°</a>
                    <a href="{{ url_for('search_page', q='ãƒªã‚¹ãƒˆ') }}" class="suggestion-tag">ãƒªã‚¹ãƒˆ</a>
                    <a href="{{ url_for('search_page', q='Web') }}" class="suggestion-tag">Web</a>
                    <a href="{{ url_for('search_page', q='å¤‰æ•°') }}" class="suggestion-tag">å¤‰æ•°</a>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</section>
{% endblock %}
